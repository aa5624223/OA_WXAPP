{"version":3,"sources":["assets/images/999.png","api/ajax.js","utils/storageUtils.js","api/index.js","utils/memoryUtils.js","pages/login/index.jsx","utils/index.js","config/table-columns.js","pages/admin/index.jsx","App.js","index.js"],"names":["ajax","url","data","type","Promise","resolve","reject","axios","get","params","post","headers","then","response","catch","error","message","USER_KEY","localStore","saveUser","user","store","set","getUser","removeUser","remove","BASE","window","location","origin","Request","formData","append","UserCode","Memory","Item","login","formRef","React","createRef","handleSubmit","event","a","preventDefault","form","current","getFieldsValue","username","password","FormData","getFieldsError","find","item","errors","length","result","status","warn","success","JSON","parse","memoryUtils","storageUtils","props","history","replace","CName","OAAccount","to","className","src","logo","alt","ref","this","onSubmitCapture","name","rules","required","pattern","whitespace","placeholder","prefix","UserOutlined","style","color","Password","LockOutlined","htmlType","Component","withRouter","ConvertFomrData","jsons","formData1","Object","keys","forEach","key","undefined","i","str","getColumnSearchProps","dataIndex","_this","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","padding","node","searchInput","value","onChange","e","state","conditions","target","onPressEnter","handleSearch","width","marginBottom","display","onClick","handleChange","icon","SearchOutlined","size","filterIcon","filtered","onFilterDropdownVisibleChange","visible","setTimeout","select","render","text","searchedColumn","highlightStyle","backgroundColor","searchWords","searchText","autoEscape","textToHighlight","toString","getColumnSelectProps","Options","Group","val","setState","map","toZip","imgSrcList","FileNames","fileName","zip","JSZip","imgFolder","folder","tempImage","Image","crossOrigin","onload","file","img","canvas","document","createElement","height","getContext","drawImage","ext","substring","lastIndexOf","toLowerCase","toDataURL","getBase64Image","base64","generateAsync","content","FileSaver","saveAs","moment","format","SignList_Columns","title","fixed","admin","Columns","filteredInfo","sortedInfo","selectedRowKeys","table_Loade","dataSource","onSelectChange","pagination","page","pageSize","filters","componentDidMount","loginid","onSelectDownLoad","record","opt","newSelects","push","WxOpenid","DownLoadSign","filtersData","filter","item2","FileRoute","DownUrls","loginids","Names","lastname","new_DownUrls","join","new_loginids","new_Names","urls","split","rowSelection","columnWidth","selections","onSelect","changableRowKeys","marginRight","textAlign","fontSize","subcompanyname","bordered","rowKey","sticky","columns","loading","App","path","component","Admin","Login","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.0a17d481.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/999.b9883ce8.png\";","import axios from 'axios'\r\nimport { message } from 'antd'\r\nexport default function ajax(url, data = {}, type = 'GET') {\r\n    return new Promise((resolve, reject) => {\r\n        let promise;\r\n        if (type === 'GET') {//get请求\r\n            promise = axios.get(url, {//参数\r\n                params: data\r\n            })\r\n        } else if(type === 'POST'){//post请求\r\n            promise = axios.post(url, data)\r\n        }else{//form\r\n            promise = axios.post(url, data,{  \r\n                headers: { 'content-type': 'multipart/form-data'}\r\n            }\r\n                )\r\n        }\r\n        promise.then(response => {\r\n            resolve(response.data)\r\n        }).catch(error => {\r\n            message.error('网络请求出错' + error.message)\r\n        })\r\n    })\r\n}","//import { getSuggestedQuery } from \"@testing-library/react\";\r\nimport store from 'store'\r\n/*\r\n    将数据存在本地\r\n*/\r\nconst USER_KEY = 'user_key_sign'\r\nconst localStore = {\r\n    //1.保存数据\r\n    saveUser (user){\r\n        //localStorage.setItem(USER_KEY,JSON.stringify(user));\r\n        store.set(USER_KEY,user);\r\n    },\r\n    //2.读取数据\r\n    getUser(){\r\n        //return JSON.parse(localStorage.getItem(USER_KEY)||'{}');\r\n        return store.get(USER_KEY)||{}\r\n    },\r\n    //3.删除数据\r\n    removeUser(){\r\n        store.remove(USER_KEY);\r\n    }\r\n}\r\nexport default localStore;","import ajax from './ajax'\r\nimport localStore from '../utils/storageUtils'\r\nconst BASE = window.location.origin+\"/\";\r\nexport const Request = (url,formData,type = 'GET')=>{\r\n    const user = localStore.getUser();\r\n    // /OA_WXAPP/\r\n    url=\"/OA_WXAPP/\"+url;\r\n    formData.append(\"OptUserCode\",user.UserCode);\r\n    return ajax(BASE+url,formData,type)\r\n}","/*\r\n在内存中保存数据的工具模块\r\n*/\r\nconst Memory = {\r\n    user:{}\r\n}\r\nexport default Memory;","import React, { Component } from 'react'\r\nimport {Redirect,withRouter} from 'react-router-dom'\r\nimport {Form,Input,Button,message} from 'antd'\r\nimport {UserOutlined,LockOutlined} from '@ant-design/icons'\r\nimport './login.less'\r\nimport logo from '../../assets/images/999.png';\r\nimport { Request } from '../../api'\r\nimport memoryUtils from '../../utils/memoryUtils'\r\nimport storageUtils from '../../utils/storageUtils'\r\nconst Item = Form.Item;\r\nclass login extends Component {\r\n    formRef = React.createRef();\r\n    handleSubmit = async  (event)=>{\r\n        event.preventDefault();\r\n        const form = this.formRef.current;\r\n        const {username,password} = form.getFieldsValue(true);\r\n        var formData = new FormData();\r\n        formData.append(\"loginid\",username);\r\n        formData.append(\"password\",password);\r\n        const error = form.getFieldsError();\r\n        if(error.find(item=>item.errors.length>0)){\r\n            return;\r\n        }\r\n        //{status:0,data:user}\r\n        const result = await Request('Home/FrontWebLogin',formData,'POST');\r\n        if(result.status===0){//登录成功\r\n            if(result.data==null || result.data===\"\"){\r\n                message.warn(\"账号或密码错误\");\r\n                return;\r\n            }\r\n            message.success(\"登录成功\");\r\n            //保存user\r\n            var user = JSON.parse(result.data);\r\n            //const user = result.data.G_UserM[0];\r\n            //user.Roles = user.Roles.replaceAll('#','');\r\n            memoryUtils.user = user;//将当前登录用户保存到内存中\r\n            //保存到本地\r\n            storageUtils.saveUser(user);\r\n            this.props.history.replace('/Admin');\r\n        }else if(result.status===1){//没有找到账号密码\r\n            message.error(\"账号密码错误\");\r\n        }else{\r\n            message.error(\"登录失败\");\r\n            //测试\r\n            const user = {CName:'林炜',OAAccount:'100139'}\r\n            memoryUtils.user = user;//将当前登录用户保存到内存中\r\n            storageUtils.saveUser(user);\r\n            this.props.history.replace('/Page/admin');\r\n        }\r\n    }\r\n    render() {\r\n        const user = storageUtils.getUser();\r\n        if(user && user.OAAccount){\r\n            memoryUtils.user = user;//将当前登录用户保存到内存中\r\n            return <Redirect to='/Admin' />\r\n        }\r\n        return (\r\n            <div className=\"login\">\r\n                <div className=\"login-header\">\r\n                    <img src={logo} alt=\"logo\" className=\"Loginlogo\"></img>\r\n                    <h1>常发通微信小程序后台管理系统</h1>\r\n                </div>\r\n                <section className=\"login-content\">\r\n                    <h2>用户登录</h2>\r\n                    <Form  ref={this.formRef} onSubmitCapture={this.handleSubmit}>\r\n                        <Item name=\"username\" rules={[\r\n                            {required:true,message:'请输入用户名'},\r\n                            {pattern:/^[a-zA-Z0-9_]+$/,message:'用户名必须是数字、字母、下划线、' },\r\n                            {whitespace:true,message:'账号不能为空格'}\r\n                        ]} >\r\n                            <Input placeholder=\"账号\" prefix={<UserOutlined style={{color:'rgba(0,0,0,0.25)'}}></UserOutlined>} />\r\n                        </Item>\r\n                        <Item name=\"password\" rules={[\r\n                            {required:true,message:'请输入密码'},\r\n                            {pattern:/^[a-zA-Z0-9_@]+$/,message:'密码名必须是数字、字母、下划线、@符号' },\r\n                            {whitespace:true,message:'密码不能为空格'}\r\n                        ]} >\r\n                            <Input.Password placeholder=\"密码\" prefix={<LockOutlined style={{color:'rgba(0,0,0,0.25)'}} />} />\r\n                        </Item>\r\n                        <Item>\r\n                            <Button className=\"login-button\" type=\"primary\" htmlType=\"submit\">登录</Button>\r\n                        </Item>\r\n                    </Form>\r\n                </section>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default withRouter(login);","import {Input,Space,Button, Checkbox,Row} from 'antd'\r\nimport Highlighter from 'react-highlight-words';\r\nimport { SearchOutlined } from '@ant-design/icons';\r\n//批量下载文件\r\nimport JSZip from 'jszip'\r\nimport FileSaver from 'file-saver'\r\n\r\nimport moment from 'moment'\r\n//将Json对象转为formData\r\nexport const ConvertFomrData = (jsons) => {\r\n    let formData1 = new FormData();\r\n    Object.keys(jsons).forEach((key) => {\r\n      if (typeof jsons[key] === \"object\") {\r\n        if (jsons[key] !== null &&jsons[key] !== undefined &&jsons[key] !== \"\") {\r\n            for(let i=0;i<jsons[key].length;i++){\r\n                let str = \"\";\r\n                if(i!==jsons[key].length-1){\r\n                  str += jsons[key][i]+\",\";\r\n                }else{\r\n                  str += jsons[key][i];\r\n                }\r\n                formData1.append(key,str);\r\n            }\r\n        }\r\n      } else {\r\n        formData1.append(key, jsons[key]);\r\n      }\r\n    });\r\n    return formData1;\r\n  };\r\n\r\nexport const getColumnSearchProps = (dataIndex,_this)=>({\r\n    filterDropdown:({setSelectedKeys,selectedKeys,confirm,clearFilters })=>(\r\n        <div style={{padding:8}}>\r\n            <Input\r\n            ref={node => {\r\n                _this.searchInput = node;\r\n            }}\r\n            placeholder={`输入查询条件`}\r\n            value = {selectedKeys[0]}\r\n            onChange={e => {\r\n                _this.state.conditions[dataIndex] = e.target.value;\r\n                return setSelectedKeys(e.target.value ? [e.target.value] : [])\r\n            }}\r\n            onPressEnter={() => _this.handleSearch(selectedKeys, confirm, dataIndex)}\r\n            style={{ width: 188, marginBottom: 8, display: 'block' }}\r\n            />\r\n            <Space>\r\n                <Button\r\n                type=\"primary\"\r\n                onClick={() => _this.handleChange()}\r\n                icon={<SearchOutlined />}\r\n                size=\"small\"\r\n                style={{ width: 90 }}\r\n                >查询</Button>\r\n                <Button\r\n                onClick={() => {\r\n                    _this.state.conditions[dataIndex] = \"\";\r\n                    _this.handleChange()\r\n                    }\r\n                }\r\n                size=\"small\"\r\n                style={{ width: 90 }}\r\n                >重置</Button>\r\n            </Space>\r\n        </div>\r\n    ),\r\n    filterIcon:filtered =><SearchOutlined style={{ color: filtered ? '#1890ff' : undefined }} />,\r\n    \r\n    onFilterDropdownVisibleChange:visible =>{\r\n        if (visible) {\r\n            setTimeout(() => _this.searchInput.select(), 100);\r\n          }\r\n    },\r\n    render:text=>\r\n        _this.state.searchedColumn === dataIndex ?(\r\n            <Highlighter\r\n      highlightStyle={{ backgroundColor: '#ffc069', padding: 0 }}\r\n      searchWords={[_this.state.searchText]}\r\n      autoEscape\r\n      textToHighlight={text ? text.toString() : ''}\r\n    />\r\n    ):(\r\n        text\r\n    )\r\n})\r\n/**\r\n * 调用这个方法的组件必须有\r\n * handleChange方法 用于查询数据\r\n * state.conditions 用于增设条件\r\n * @param {*} dataIndex \r\n * @param {*} _this \r\n * @param {*} Options \r\n */\r\nexport const getColumnSelectProps = (dataIndex,_this,Options)=>({\r\n    filterDropdown: ({ setSelectedKeys, selectedKeys, confirm, clearFilters }) => {\r\n        return (<div style={{padding:8}}>\r\n            <Row style={{marginBottom:10}}>\r\n                <Checkbox.Group onChange={(val)=>{\r\n                    let conditions = _this.state.conditions;\r\n                    _this.setState({\r\n                        conditions:{...conditions,[dataIndex]:val}\r\n                    })\r\n                }}>\r\n                    {Options.map(item=> <Checkbox value={item.val} key={item.key}>{item.key}</Checkbox>)}\r\n                </Checkbox.Group>\r\n            </Row>\r\n            <Row>\r\n                <Space>\r\n                    <Button type=\"default\" size=\"small\" style={{width:90}} onClick={()=>{\r\n                        //let arr = Options.map(item=>item.val)\r\n                        _this.handleChange({},{[dataIndex]:[]},{})\r\n                    }} >重置</Button>\r\n                    <Button type=\"primary\" size=\"small\" style={{width:90}}  onClick={()=>{\r\n                        \r\n                        _this.handleChange({},{},{})\r\n                    }} >查询</Button>\r\n                </Space>\r\n            </Row>\r\n        </div>)\r\n    }\r\n})\r\n\r\nexport function toZip(imgSrcList,FileNames,fileName) {\r\n\tlet zip = new JSZip();//实例化一个压缩文件对象\r\n\tlet imgFolder = zip.folder(fileName); //新建一个图片文件夹用来存放图片，参数为文件名\r\n\tfor(let i=0;i<imgSrcList.length;i++){\r\n\t\tlet src = imgSrcList[i];\r\n\t\tlet tempImage = new Image();\r\n\t\ttempImage.src = src;\r\n\t\ttempImage.crossOrigin = \"*\";\r\n\t\ttempImage.onload = ()=> {\r\n            //imgFolder.file((i+1)+'.png', getBase64Image(tempImage).substring(22), { base64: true })\r\n            imgFolder.file(FileNames[i]+'.png', getBase64Image(tempImage).substring(22), { base64: true })\r\n\t\t}\r\n\t}\r\n\tsetTimeout(()=>{\r\n\t\tzip.generateAsync({ type: 'blob' }).then( function(content) {\r\n\t\t\tFileSaver.saveAs(content, '签名文件'+ moment().format('YYYY-MM-DD HH:mm:ss') +'.zip')\r\n\t\t})\r\n\t},3000)\r\n}\r\n \r\nfunction getBase64Image(img) {\r\n\tlet canvas = document.createElement(\"canvas\");\r\n\tcanvas.width = img.width;\r\n\tcanvas.height = img.height;\r\n\tlet ctx = canvas.getContext(\"2d\");\r\n\tctx.drawImage(img, 0, 0, img.width, img.height);\r\n\tlet ext = img.src.substring(img.src.lastIndexOf(\".\")+1).toLowerCase();\r\n\tlet dataURL = canvas.toDataURL(\"image/\"+ext);\r\n\treturn dataURL;\r\n}","import {Tag} from 'antd'\r\nimport moment from 'moment'\r\nimport { getColumnSearchProps,getColumnSelectProps} from \"../utils\";\r\nexport const SignList_Columns = (_this) => {\r\n  //let filteredInfo = _this.state.filteredInfo;\r\n  //let sortedInfo = _this.state.sortedInfo;\r\n  //filteredInfo = filteredInfo || {};\r\n  //sortedInfo = sortedInfo || {};\r\n  return [\r\n    {\r\n      title:\"工号\",\r\n      dataIndex:\"loginid\",\r\n      key: \"lastname\",\r\n      width: 80,\r\n      fixed: \"left\",\r\n      ...getColumnSearchProps('loginid',_this),\r\n    },\r\n    {\r\n      title: \"姓名\",\r\n      dataIndex: \"lastname\",\r\n      key: \"lastname\",\r\n      width: 80,\r\n      fixed: \"left\",\r\n      ...getColumnSearchProps('lastname',_this),\r\n    },\r\n    {\r\n      title:'公司',\r\n      dataIndex: \"subcompanyname\",\r\n      key: \"subcompanyname\",\r\n      width: 120,\r\n      fixed: \"left\",\r\n      ...getColumnSearchProps('subcompanyname',_this),\r\n    },\r\n    {\r\n      title: \"签名上传时间\",\r\n      dataIndex: \"FileTime\",\r\n      key: \"FileTime\",\r\n      fixed: \"left\",\r\n      width: 80,\r\n      render:(val)=>{\r\n        if(val ===\"0001-01-01T00:00:00\"){\r\n          return \"\"\r\n        }else{\r\n          return moment(val).format(\"YYYY-MM-DD HH:ss:mm\");\r\n        }\r\n      }\r\n    },\r\n    {\r\n      title: \"签名\",\r\n      dataIndex: \"FileRoute\",\r\n      key: \"FileRoute\",\r\n      width: 80,\r\n      fixed: \"left\",\r\n      ...getColumnSelectProps('FileRoute',_this,[{key:'已上传',val:'download'},{key:'未上传',val:'downloadNot'}]),\r\n      render: (val) => {\r\n        if (val === undefined || val === \"\" || val === null) {\r\n          return <Tag color=\"red\">未上传</Tag>\r\n        } else {\r\n          return <Tag color=\"green\">已上传</Tag>\r\n        }\r\n      },\r\n    },\r\n  ];\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { withRouter, Redirect } from \"react-router-dom\";\r\n//引入配置\r\nimport { SignList_Columns } from \"../../config/table-columns\"\r\n//api\r\nimport { Request } from '../../api'\r\n//引入工具类\r\nimport memoryUtils from \"../../utils/memoryUtils\";\r\nimport storageUtils from \"../../utils/storageUtils\";\r\nimport {ConvertFomrData,toZip} from '../../utils'\r\nimport moment from 'moment'\r\nimport { Table, Button,message} from \"antd\";\r\n\r\nclass admin extends Component {\r\n  state = {\r\n    Columns: [],\r\n    filteredInfo:null,\r\n    sortedInfo:null,\r\n    selectedRowKeys:[],\r\n    table_Loade:false,\r\n    dataSource:[],\r\n    conditions:[]\r\n  };\r\n  //选择\r\n  onSelectChange = selectedRowKeys =>{\r\n    this.setState({ selectedRowKeys });\r\n  }\r\n  //查询\r\n  handleChange  = async (pagination={page:1,pageSize:20}, filters={}, sorter={})=>{\r\n    let {conditions} = this.state;\r\n    conditions = {...pagination,...conditions,...filters}\r\n    let formData = ConvertFomrData(conditions);\r\n    this.setState({\r\n      table_Loade:true\r\n    })\r\n    const result = await Request('Home/SearchSign',formData,'POST');\r\n    if(result.status===0){//成功\r\n      this.setState({\r\n        dataSource:JSON.parse(result.data),\r\n        table_Loade:false\r\n      })\r\n    }else{\r\n      message.error(\"网络错误\");\r\n      this.setState({\r\n        table_Loade:false\r\n      })\r\n    }\r\n  }\r\n  componentDidMount = () => {\r\n    //判断用户\r\n    let user = memoryUtils.user;\r\n    if (!user || !user.loginid) {\r\n      user = storageUtils.getUser();\r\n    }\r\n    let Columns = SignList_Columns(this);\r\n    //设置数据\r\n    this.setState({\r\n        Columns: Columns,\r\n    });\r\n    this.handleChange();\r\n  };\r\n  //全选已上传的行\r\n  onSelectDownLoad = (record,opt,key)=>{\r\n    let newSelects = [];\r\n    if(opt === \"SELECT_DownLoad\"){\r\n        record.forEach(item=>{\r\n            if(item[key]!==\"\" && item[key]!==null){\r\n                newSelects.push(item.WxOpenid);\r\n            }\r\n        })\r\n    }else if(opt===\"SELECT_DownLoadNot\"){\r\n        record.forEach(item=>{\r\n            if(item[key]===\"\" || item[key]===null){\r\n                newSelects.push(item.WxOpenid);\r\n            }\r\n        })\r\n    }\r\n    this.setState({selectedRowKeys:newSelects})\r\n  }\r\n  DownLoadSign = async () => {\r\n    //DownLoadSign\r\n    //selectedRowKeys\r\n    const {dataSource,selectedRowKeys} = this.state;\r\n    if(selectedRowKeys.length===0){\r\n      message.warn(\"请选择要下载的签名\");\r\n      return;\r\n    }\r\n    let filtersData = dataSource.filter((item)=>{\r\n      if(selectedRowKeys.find(item2=>item.WxOpenid===item2)!==undefined){\r\n        if(item.FileRoute!==null && item.FileRoute !==\"\"){\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    })\r\n    if(filtersData===undefined || filtersData.length===0){\r\n      message.warn(\"没有选择已上传的数据\");\r\n      return;\r\n    }\r\n    let DownUrls = filtersData.map(item=>{\r\n      return item.FileRoute;\r\n    })\r\n    let loginids = filtersData.map(item=>{\r\n      return item.loginid;\r\n    })\r\n    let Names = filtersData.map(item=>{\r\n      return item.lastname;\r\n    })\r\n    let new_DownUrls = DownUrls.join(',');\r\n    let new_loginids = loginids.join(',');\r\n    let new_Names = Names.join(',');\r\n    let formData = new FormData();\r\n    formData.append(\"Ftps\",new_DownUrls);\r\n    formData.append(\"loginids\",new_loginids);\r\n    formData.append(\"Names\",new_Names);\r\n    const result = await Request('Home/getSignUrl',formData,'POST');\r\n    if(result.status===0){\r\n      //msg\r\n      let urls =  result.data.split(',');\r\n      let FileNames = [];\r\n      for(let i=0;i<Names.length;i++){\r\n        FileNames.push(loginids[i]+\"_\"+Names[i]);\r\n      }\r\n      toZip(urls,FileNames,\"签名文件\"+moment().format(\"YYYY-MM-dd HH:mm:ss\"));\r\n      message.success(\"成功\");\r\n    }else{\r\n      message.error(\"网络错误\");\r\n    }\r\n  };\r\n  render() {\r\n    const { Columns,selectedRowKeys,dataSource,table_Loade,conditions} = this.state;\r\n    //获取用户信息\r\n    let user = memoryUtils.user;\r\n    //const {menuList} = this.state;\r\n    if (!user || !user.loginid) {\r\n      user = storageUtils.getUser();\r\n    }\r\n    if (!user || !user.loginid) {\r\n      return <Redirect to=\"/Login\" />;\r\n    }\r\n    //多选\r\n    const rowSelection = {\r\n        selectedRowKeys,\r\n        columnWidth:15,\r\n        onChange: this.onSelectChange,\r\n        selections:[\r\n            {\r\n                key:'SELECT_ALL',\r\n                text: '全选',\r\n                onSelect:changableRowKeys=>{\r\n                    this.setState({selectedRowKeys:changableRowKeys});\r\n                }\r\n            },\r\n            {\r\n                key: 'SELECT_DownLoad',\r\n                text: '全选已下载',\r\n                onSelect: changableRowKeys => {\r\n                    this.onSelectDownLoad(dataSource,\"SELECT_DownLoad\",\"FileRoute\");\r\n                }\r\n            },\r\n            {\r\n                key: 'SELECT_DownLoadNot',\r\n                text: '全选未下载',\r\n                onSelect: changableRowKeys => {\r\n                    this.onSelectDownLoad(dataSource,\"SELECT_DownLoadNot\",\"FileRoute\");\r\n                }\r\n            }\r\n        ]\r\n    }\r\n    return (\r\n      \r\n      <div className=\"main\">\r\n        <div className=\"toolArea\">\r\n          \r\n          <Button type=\"primary\" style={{marginRight:'2%'}} onClick={() => this.DownLoadSign()}>\r\n            下载签名\r\n          </Button>\r\n          <p style={{ textAlign: \"left\", fontSize: \"22px\" }}>当前查询条件:\r\n            {(conditions.lastname===''||conditions.lastname===undefined)?'':'姓名:'+conditions.lastname+','}\r\n            {(conditions.subcompanyname===''||conditions.subcompanyname===undefined)?'':'公司:'+conditions.subcompanyname+','}\r\n          </p>\r\n        </div>\r\n        <Table\r\n        rowSelection = {rowSelection}\r\n          bordered\r\n          rowKey=\"WxOpenid\"\r\n          sticky={true}\r\n          columns={Columns}\r\n          loading = {table_Loade}\r\n          size=\"middle\"\r\n          dataSource={dataSource}\r\n          pagination = {false}\r\n          style={{width:'98%'}}\r\n        ></Table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(admin);\r\n","import \"./App.less\";\nimport React, { Component } from 'react'\nimport 'default-passive-events'\nimport { Switch, Route, HashRouter, Redirect } from \"react-router-dom\";\n//_this\n\nimport Login from \"./pages/login\";\nimport Admin from \"./pages/admin\";\nexport default class App extends Component {\n  render(){\n    return (\n      <HashRouter>\n        <Switch>\n          <Route path=\"/Admin\" component={Admin} />\n          <Route path=\"/Login\" component={Login}></Route>\n          <Redirect to=\"/Login\" />\n        </Switch>\n      </HashRouter>\n    );\n  }\n  \n}\n","import React from 'react';\nimport {BrowserRouter} from 'react-router-dom'\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}